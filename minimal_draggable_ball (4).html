<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Минималистичный мячик — перетаскивай</title>
  <style>
    :root{--bg:#f5f6f7;--card:#ffffff;--muted:#6b7280;--accent:#0ea5a4}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
      background:linear-gradient(180deg,var(--bg),#eef2f4);
      display:flex;align-items:center;justify-content:center;padding:24px;color:#0f172a
    }
    .frame{width:760px; max-width:100%; background:var(--card); border-radius:14px; padding:18px;box-shadow:0 8px 30px rgba(8,15,20,0.06);display:flex;flex-direction:column;gap:12px;align-items:center}
    .play-area{width:100%;height:420px;border-radius:10px;background:linear-gradient(180deg,#fbfdff,#f7fbfb);border:1px solid rgba(15,23,42,0.03);position:relative;overflow:hidden;touch-action:none;}
    .ball{width:64px;height:64px;border-radius:50%;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:radial-gradient(circle at 30% 30%, #ffffff 0%, #a8f0ef 20%, #06b6b4 60%);box-shadow:0 10px 22px rgba(6,22,22,0.12), inset -6px -8px 18px rgba(255,255,255,0.35);cursor:grab;touch-action:none;user-select:none;}
    .ball:active{cursor:grabbing}
  </style>
</head>
<body>
  <div class="frame">
    <h1>Минималистичный мячик</h1>
    <div class="play-area" id="playArea">
      <div class="ball" id="ball"></div>
    </div>
  </div>
  <script>
    const ball = document.getElementById('ball');
    const area = document.getElementById('playArea');
    let offsetX = 0, offsetY = 0, dragging = false;

    let vx = 0; // скорость по X
    let vy = 0; // скорость по Y
    let gravity = 0.5; // сила гравитации
    let bounce = 0.7; // коэффициент упругости
    let friction = 0.99; // замедление по воздуху
    let lastX = 0, lastY = 0; // предыдущие координаты курсора
    let animationFrame;

    ball.addEventListener('pointerdown', (e) => {
      dragging = true;
      const rect = ball.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      lastX = e.clientX;
      lastY = e.clientY;
      ball.setPointerCapture(e.pointerId);
      cancelAnimationFrame(animationFrame);
    });

    ball.addEventListener('pointermove', (e) => {
      if (!dragging) return;
      const areaRect = area.getBoundingClientRect();
      let x = e.clientX - areaRect.left - offsetX;
      let y = e.clientY - areaRect.top - offsetY;

      // ограничение в пределах поля
      x = Math.max(0, Math.min(areaRect.width - ball.offsetWidth, x));
      y = Math.max(0, Math.min(areaRect.height - ball.offsetHeight, y));

      // вычисляем скорость во время перетаскивания
      vx = e.clientX - lastX;
      vy = e.clientY - lastY;
      lastX = e.clientX;
      lastY = e.clientY;

      ball.style.left = x + 'px';
      ball.style.top = y + 'px';
      ball.style.transform = 'none';
    });

    ball.addEventListener('pointerup', () => {
      dragging = false;
      animateBall();
    });

    function animateBall(){
      const areaRect = area.getBoundingClientRect();
      let left = parseFloat(ball.style.left || 0);
      let top = parseFloat(ball.style.top || 0);
      if (isNaN(left)) left = areaRect.width/2 - ball.offsetWidth/2;
      if (isNaN(top)) top = areaRect.height/2 - ball.offsetHeight/2;

      if (!dragging) {
        vx *= friction;
        vy += gravity;
      }

      left += vx;
      top += vy;

      const floor = areaRect.height - ball.offsetHeight;
      const rightWall = areaRect.width - ball.offsetWidth;

      if (top >= floor) {
        top = floor;
        vy = -vy * bounce;
      }
      if (top <= 0) {
        top = 0;
        vy = -vy * bounce;
      }

      if (left >= rightWall) {
        left = rightWall;
        vx = -vx * bounce;
      }
      if (left <= 0) {
        left = 0;
        vx = -vx * bounce;
      }

      ball.style.left = left + 'px';
      ball.style.top = top + 'px';

      animationFrame = requestAnimationFrame(animateBall);
    }
  </script>
</body>
</html>
